document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#dlx-pmpro-turnstile-preview-form");e.addEventListener("submit",(function(t){t.preventDefault();var r=e.querySelector('input[type="submit"]');r.setAttribute("disabled","disabled");var n=document.querySelector('input[name="cf-turnstile-response"]');if(!n){var o=document.createElement("div");return o.classList.add("notice"),o.classList.add("notice-error"),o.innerHTML="<p>Error! We could not get the Turnstile token. Please close this modal and try with a different key.</p>",document.querySelector("#notice-placeholder").replaceWith(o),void r.remove()}var i=new URL(e.action);i.searchParams.append("turnstyleToken",n.value),fetch(i.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:{action:"dlx_pmpro_turnstile_admin_preview_validate",turnStyleToken:n.value}}).then((function(e){if(e.ok){var t=document.createElement("div");return t.classList.add("notice"),t.classList.add("notice-success"),t.innerHTML="<p><strong>Success!</strong> Everything is working. Please close this modal and save your changes.</p>",document.querySelector("#notice-placeholder").replaceWith(t),r.remove(),e.json()}var n=document.createElement("div");n.classList.add("notice"),n.classList.add("notice-error"),n.innerHTML="<p><strong>Error!</strong> Turnstile couldn't verify you as human. Please close this modal and try again. If there is still an error, there may be an issue with your Turnstile keys.</p>",document.querySelector("#notice-placeholder").replaceWith(n),r.remove()})).catch((function(e){console.error(e)}))}))})),window.onLoadDLXPMProPreviewCallback=function(){var e=turnstile.render("#dlx-pmpro-turnstile-placeholder",{sitekey:dlxCF.siteKey,retry:"never",callback:function(t){document.querySelector('#dlx-pmpro-turnstile-preview-form input[type="submit"]').removeAttribute("disabled"),setTimeout((function(){turnstile.reset(e)}),3e5)},size:dlxCF.size,theme:dlxCF.theme,language:dlxCF.language,appearance:dlxCF.appearance})};