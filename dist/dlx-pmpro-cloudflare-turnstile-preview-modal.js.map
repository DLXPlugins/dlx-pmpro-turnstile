{"version":3,"file":"dlx-pmpro-cloudflare-turnstile-preview-modal.js","mappings":";UAAA;UACA;;;;;WCDA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;ACNA;AACAA,QAAQ,CAACC,gBAAgB,CAAE,kBAAkB,EAAE,YAAM;EACpD;EACA,IAAMC,IAAI,GAAGF,QAAQ,CAACG,aAAa,CAAE,mCAAoC,CAAC;;EAE1E;EACAD,IAAI,CAACD,gBAAgB,CAAE,QAAQ,EAAE,UAAEG,CAAC,EAAM;IACzCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,IAAMC,cAAc,GAAGN,QAAQ,CAACG,aAAa,CAAE,qCAAsC,CAAC;IACtF,IAAK,CAAEG,cAAc,EAAG;MACvB;MACA;IACD;;IAEA;IACA,IAAMC,GAAG,GAAG,IAAIC,GAAG,CAAEN,IAAI,CAACO,MAAO,CAAC;IAClCF,GAAG,CAACG,YAAY,CAACC,MAAM,CAAE,gBAAgB,EAAEL,cAAc,CAACM,KAAM,CAAC;;IAEjE;IACAC,KAAK,CAAEN,GAAG,CAACO,QAAQ,CAAC,CAAC,EAAE;MACtBC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACR,cAAc,EAAE;MACjB,CAAC;MACDC,IAAI,EAAE;QACLR,MAAM,EAAE,4CAA4C;QACpDS,cAAc,EAAEZ,cAAc,CAACM;MAChC;IACD,CAAE,CAAC,CAACO,IAAI,CAAE,UAAEC,QAAQ,EAAM;MACzB,IAAKA,QAAQ,CAACC,EAAE,EAAG;QAClBC,OAAO,CAACC,GAAG,CAAE,SAAU,CAAC;QACxB,OAAOH,QAAQ,CAACI,IAAI,CAAC,CAAC;MACvB;;MAEA;MACA;IACD,CACA,CAAC,SAAM,CAAE,UAAEC,KAAK,EAAM;MACrBH,OAAO,CAACG,KAAK,CAAEA,KAAM,CAAC;IACvB,CAAE,CAAC;EACJ,CAAE,CAAC;AACJ,CAAE,CAAC;AAEHC,MAAM,CAACC,6BAA6B,GAAG,YAAM;EAC5C,IAAMC,QAAQ,GAAGC,SAAS,CAACC,MAAM,CAAE,kCAAkC,EAAE;IACtEC,OAAO,EAAEC,KAAK,CAACC,OAAO;IACtBC,KAAK,EAAE,OAAO;IACdC,QAAQ,EAAE,SAAAA,SAAEC,KAAK,EAAM;MACtB;MACAC,UAAU,CAAE,YAAM;QACjB;QACA;QACAR,SAAS,CAACS,KAAK,CAAEV,QAAS,CAAC;MAC5B,CAAC,EAAE,MAAO,CAAC,CAAC,CAAC;IACd,CAAC;;IAAC;IACFW,IAAI,EAAEP,KAAK,CAACO,IAAI;IAAE;IAClBC,KAAK,EAAER,KAAK,CAACQ,KAAK;IAAE;IACpBC,QAAQ,EAAET,KAAK,CAACS,QAAQ;IACxBC,UAAU,EAAEV,KAAK,CAACU;EACnB,CAAE,CAAC;AACJ,CAAC,C;;;;;;;;;;AC7DD","sources":["webpack://dlx-pmpro-turnstile/webpack/bootstrap","webpack://dlx-pmpro-turnstile/webpack/runtime/make namespace object","webpack://dlx-pmpro-turnstile/./src/js/preview/index.js","webpack://dlx-pmpro-turnstile/./src/scss/modal.scss"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Set up onload event.\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\t// Get form.\n\tconst form = document.querySelector( '#dlx-pmpro-turnstile-preview-form' );\n\n\t// Attach to submit button.\n\tform.addEventListener( 'submit', ( e ) => {\n\t\te.preventDefault();\n\n\t\tconst turnstileToken = document.querySelector( 'input[name=\"cf-turnstile-response\"]' );\n\t\tif ( ! turnstileToken ) {\n\t\t\t// todo - show error.\n\t\t\treturn;\n\t\t}\n\n\t\t// Append token to form action URL.\n\t\tconst url = new URL( form.action );\n\t\turl.searchParams.append( 'turnstyleToken', turnstileToken.value );\n\n\t\t// Perform fetch request.\n\t\tfetch( url.toString(), {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: {\n\t\t\t\taction: 'dlx_pmpro_turnstile_admin_preview_validate',\n\t\t\t\tturnStyleToken: turnstileToken.value,\n\t\t\t},\n\t\t} ).then( ( response ) => {\n\t\t\tif ( response.ok ) {\n\t\t\t\tconsole.log( 'success' );\n\t\t\t\treturn response.json();\n\t\t\t}\n\n\t\t\t// Failed.\n\t\t\t// todo - show error.\n\t\t}\n\t\t).catch( ( error ) => {\n\t\t\tconsole.error( error );\n\t\t} );\n\t} );\n} );\n\nwindow.onLoadDLXPMProPreviewCallback = () => {\n\tconst widgetId = turnstile.render( '#dlx-pmpro-turnstile-placeholder', {\n\t\tsitekey: dlxCF.siteKey,\n\t\tretry: 'never',\n\t\tcallback: ( token ) => {\n\t\t\t// Re-enable the submit button.\n\t\t\tsetTimeout( () => {\n\t\t\t\t// Reset the widget.\n\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\tturnstile.reset( widgetId );\n\t\t\t}, 300000 ); // 300 seconds (5 mins).\n\t\t},// This is when I have to register the layout.\n\t\tsize: dlxCF.size, /* can be compact|normal. */\n\t\ttheme: dlxCF.theme, /* can be light, dark, auto */\n\t\tlanguage: dlxCF.language,\n\t\tappearance: dlxCF.appearance,\n\t} );\n};\n","// extracted by mini-css-extract-plugin\nexport {};"],"names":["document","addEventListener","form","querySelector","e","preventDefault","turnstileToken","url","URL","action","searchParams","append","value","fetch","toString","method","headers","body","turnStyleToken","then","response","ok","console","log","json","error","window","onLoadDLXPMProPreviewCallback","widgetId","turnstile","render","sitekey","dlxCF","siteKey","retry","callback","token","setTimeout","reset","size","theme","language","appearance"],"sourceRoot":""}